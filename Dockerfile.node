# Stage 1: Build frontend assets
FROM public.ecr.aws/docker/library/node:20 AS builder

WORKDIR /var/www

# Copy dependency files and install
COPY package.json yarn.lock ./
RUN yarn install --frozen-lockfile

# Copy source code
COPY . .

# Build frontend assets
RUN yarn build
